import { Action, createReducer, on } from "@ngrx/store";
import { GetLocationInfo } from "src/app/shared/models/weather/geo-location.model";
import { WeatherModels } from "src/app/shared/models/weather/weather.model";
import * as actionsWeather from "./weather.action";

export interface WeatherFeatureState {
  cityGeoInfos?: GetLocationInfo[];
  searchedCityText?: string;
  fetchedCityInfo: WeatherModels.GetWeatherInfoWithCoordinates;
  requestedCityInfo?: GetLocationInfo;
  unit: string;
}
export const initialState: WeatherFeatureState = {
  unit: "metric",
  fetchedCityInfo: {
    lat: 51.4408,
    lon: 5.4778,
    timezone: "Europe/Amsterdam",
    timezone_offset: 7200,
    current: {
      dt: 1633995972,
      sunrise: 1634018208,
      sunset: 1634057519,
      temp: 10.15,
      feels_like: 9.57,
      pressure: 1024,
      humidity: 90,
      dew_point: 8.59,
      uvi: 0,
      clouds: 75,
      visibility: 10000,
      wind_speed: 2.06,
      wind_deg: 230,
      weather: [
        { id: 500, main: "Rain", description: "light rain", icon: "10n" },
      ],
      rain: { "1h": 0.38 },
    },
    hourly: [
      {
        dt: 1633993200,
        temp: 10.02,
        feels_like: 9.4,
        pressure: 1024,
        humidity: 89,
        dew_point: 8.29,
        uvi: 0,
        clouds: 79,
        visibility: 10000,
        wind_speed: 2.59,
        wind_deg: 273,
        wind_gust: 5.38,
        weather: [
          {
            id: 803,
            main: "Clouds",
            description: "broken clouds",
            icon: "04n",
          },
        ],
        pop: 0,
      },
      {
        dt: 1633996800,
        temp: 10.15,
        feels_like: 9.57,
        pressure: 1024,
        humidity: 90,
        dew_point: 8.59,
        uvi: 0,
        clouds: 75,
        visibility: 10000,
        wind_speed: 2.74,
        wind_deg: 272,
        wind_gust: 6.36,
        weather: [
          { id: 500, main: "Rain", description: "light rain", icon: "10n" },
        ],
        pop: 0.2,
        rain: { "1h": 0.37 },
      },
      {
        dt: 1634000400,
        temp: 10.08,
        feels_like: 9.47,
        pressure: 1024,
        humidity: 89,
        dew_point: 8.35,
        uvi: 0,
        clouds: 80,
        visibility: 10000,
        wind_speed: 2.94,
        wind_deg: 269,
        wind_gust: 7.69,
        weather: [
          {
            id: 803,
            main: "Clouds",
            description: "broken clouds",
            icon: "04n",
          },
        ],
        pop: 0.06,
      },
      {
        dt: 1634004000,
        temp: 9.71,
        feels_like: 8.21,
        pressure: 1024,
        humidity: 89,
        dew_point: 7.99,
        uvi: 0,
        clouds: 84,
        visibility: 10000,
        wind_speed: 2.93,
        wind_deg: 270,
        wind_gust: 7.16,
        weather: [
          {
            id: 803,
            main: "Clouds",
            description: "broken clouds",
            icon: "04n",
          },
        ],
        pop: 0.01,
      },
      {
        dt: 1634007600,
        temp: 9.5,
        feels_like: 8,
        pressure: 1023,
        humidity: 88,
        dew_point: 7.61,
        uvi: 0,
        clouds: 89,
        visibility: 10000,
        wind_speed: 2.85,
        wind_deg: 262,
        wind_gust: 6.8,
        weather: [
          {
            id: 804,
            main: "Clouds",
            description: "overcast clouds",
            icon: "04n",
          },
        ],
        pop: 0,
      },
      {
        dt: 1634011200,
        temp: 9.51,
        feels_like: 8.02,
        pressure: 1023,
        humidity: 86,
        dew_point: 7.29,
        uvi: 0,
        clouds: 94,
        visibility: 10000,
        wind_speed: 2.84,
        wind_deg: 259,
        wind_gust: 7.08,
        weather: [
          {
            id: 804,
            main: "Clouds",
            description: "overcast clouds",
            icon: "04n",
          },
        ],
        pop: 0,
      },
      {
        dt: 1634014800,
        temp: 9.56,
        feels_like: 8.07,
        pressure: 1022,
        humidity: 88,
        dew_point: 7.64,
        uvi: 0,
        clouds: 99,
        visibility: 10000,
        wind_speed: 2.86,
        wind_deg: 248,
        wind_gust: 6.81,
        weather: [
          { id: 500, main: "Rain", description: "light rain", icon: "10n" },
        ],
        pop: 0.2,
        rain: { "1h": 0.21 },
      },
      {
        dt: 1634018400,
        temp: 9.87,
        feels_like: 8.06,
        pressure: 1021,
        humidity: 90,
        dew_point: 8.29,
        uvi: 0,
        clouds: 99,
        visibility: 10000,
        wind_speed: 3.54,
        wind_deg: 238,
        wind_gust: 9.48,
        weather: [
          {
            id: 804,
            main: "Clouds",
            description: "overcast clouds",
            icon: "04d",
          },
        ],
        pop: 0.06,
      },
      {
        dt: 1634022000,
        temp: 10.4,
        feels_like: 9.85,
        pressure: 1021,
        humidity: 90,
        dew_point: 8.84,
        uvi: 0.01,
        clouds: 100,
        visibility: 10000,
        wind_speed: 4.26,
        wind_deg: 252,
        wind_gust: 10.17,
        weather: [
          {
            id: 804,
            main: "Clouds",
            description: "overcast clouds",
            icon: "04d",
          },
        ],
        pop: 0.46,
      },
      {
        dt: 1634025600,
        temp: 10.63,
        feels_like: 10.18,
        pressure: 1021,
        humidity: 93,
        dew_point: 9.46,
        uvi: 0.05,
        clouds: 100,
        visibility: 10000,
        wind_speed: 4.3,
        wind_deg: 258,
        wind_gust: 9.77,
        weather: [
          { id: 500, main: "Rain", description: "light rain", icon: "10d" },
        ],
        pop: 0.77,
        rain: { "1h": 0.34 },
      },
      {
        dt: 1634029200,
        temp: 10.84,
        feels_like: 10.43,
        pressure: 1020,
        humidity: 94,
        dew_point: 9.92,
        uvi: 0.11,
        clouds: 100,
        visibility: 10000,
        wind_speed: 4.08,
        wind_deg: 264,
        wind_gust: 9.22,
        weather: [
          { id: 500, main: "Rain", description: "light rain", icon: "10d" },
        ],
        pop: 0.89,
        rain: { "1h": 0.43 },
      },
      {
        dt: 1634032800,
        temp: 11.35,
        feels_like: 10.97,
        pressure: 1020,
        humidity: 93,
        dew_point: 10.25,
        uvi: 0.45,
        clouds: 100,
        visibility: 10000,
        wind_speed: 3.99,
        wind_deg: 270,
        wind_gust: 9.23,
        weather: [
          { id: 500, main: "Rain", description: "light rain", icon: "10d" },
        ],
        pop: 0.94,
        rain: { "1h": 0.31 },
      },
      {
        dt: 1634036400,
        temp: 12.73,
        feels_like: 12.33,
        pressure: 1020,
        humidity: 87,
        dew_point: 10.59,
        uvi: 0.57,
        clouds: 100,
        visibility: 10000,
        wind_speed: 4.37,
        wind_deg: 301,
        wind_gust: 8.75,
        weather: [
          { id: 500, main: "Rain", description: "light rain", icon: "10d" },
        ],
        pop: 0.94,
        rain: { "1h": 0.52 },
      },
      {
        dt: 1634040000,
        temp: 11.92,
        feels_like: 11.52,
        pressure: 1019,
        humidity: 90,
        dew_point: 10.31,
        uvi: 0.59,
        clouds: 100,
        visibility: 10000,
        wind_speed: 4.22,
        wind_deg: 323,
        wind_gust: 7.89,
        weather: [
          { id: 500, main: "Rain", description: "light rain", icon: "10d" },
        ],
        pop: 0.98,
        rain: { "1h": 0.45 },
      },
      {
        dt: 1634043600,
        temp: 11.64,
        feels_like: 11.18,
        pressure: 1019,
        humidity: 89,
        dew_point: 9.82,
        uvi: 1.14,
        clouds: 100,
        visibility: 10000,
        wind_speed: 3.39,
        wind_deg: 344,
        wind_gust: 8.49,
        weather: [
          { id: 500, main: "Rain", description: "light rain", icon: "10d" },
        ],
        pop: 0.92,
        rain: { "1h": 0.28 },
      },
      {
        dt: 1634047200,
        temp: 11.51,
        feels_like: 10.96,
        pressure: 1019,
        humidity: 86,
        dew_point: 9.22,
        uvi: 0.77,
        clouds: 99,
        visibility: 10000,
        wind_speed: 4.21,
        wind_deg: 338,
        wind_gust: 8.7,
        weather: [
          {
            id: 804,
            main: "Clouds",
            description: "overcast clouds",
            icon: "04d",
          },
        ],
        pop: 0.77,
      },
      {
        dt: 1634050800,
        temp: 12.31,
        feels_like: 11.61,
        pressure: 1019,
        humidity: 77,
        dew_point: 8.34,
        uvi: 0.38,
        clouds: 85,
        visibility: 10000,
        wind_speed: 5.55,
        wind_deg: 355,
        wind_gust: 8.78,
        weather: [
          { id: 500, main: "Rain", description: "light rain", icon: "10d" },
        ],
        pop: 0.79,
        rain: { "1h": 0.13 },
      },
      {
        dt: 1634054400,
        temp: 11.15,
        feels_like: 10.28,
        pressure: 1020,
        humidity: 75,
        dew_point: 6.87,
        uvi: 0.19,
        clouds: 65,
        visibility: 10000,
        wind_speed: 4.78,
        wind_deg: 350,
        wind_gust: 9.07,
        weather: [
          {
            id: 803,
            main: "Clouds",
            description: "broken clouds",
            icon: "04d",
          },
        ],
        pop: 0.56,
      },
      {
        dt: 1634058000,
        temp: 9.11,
        feels_like: 7.19,
        pressure: 1021,
        humidity: 81,
        dew_point: 6.12,
        uvi: 0,
        clouds: 53,
        visibility: 10000,
        wind_speed: 3.45,
        wind_deg: 344,
        wind_gust: 9.04,
        weather: [
          {
            id: 803,
            main: "Clouds",
            description: "broken clouds",
            icon: "04n",
          },
        ],
        pop: 0.53,
      },
      {
        dt: 1634061600,
        temp: 8.29,
        feels_like: 6.27,
        pressure: 1022,
        humidity: 84,
        dew_point: 5.78,
        uvi: 0,
        clouds: 45,
        visibility: 10000,
        wind_speed: 3.31,
        wind_deg: 340,
        wind_gust: 9.11,
        weather: [
          {
            id: 802,
            main: "Clouds",
            description: "scattered clouds",
            icon: "03n",
          },
        ],
        pop: 0.45,
      },
      {
        dt: 1634065200,
        temp: 7.96,
        feels_like: 5.97,
        pressure: 1022,
        humidity: 84,
        dew_point: 5.34,
        uvi: 0,
        clouds: 17,
        visibility: 10000,
        wind_speed: 3.14,
        wind_deg: 328,
        wind_gust: 8.19,
        weather: [
          { id: 801, main: "Clouds", description: "few clouds", icon: "02n" },
        ],
        pop: 0,
      },
      {
        dt: 1634068800,
        temp: 9.01,
        feels_like: 7.49,
        pressure: 1022,
        humidity: 77,
        dew_point: 5.1,
        uvi: 0,
        clouds: 48,
        visibility: 10000,
        wind_speed: 2.74,
        wind_deg: 315,
        wind_gust: 6.73,
        weather: [
          {
            id: 802,
            main: "Clouds",
            description: "scattered clouds",
            icon: "03n",
          },
        ],
        pop: 0,
      },
      {
        dt: 1634072400,
        temp: 9.52,
        feels_like: 8.11,
        pressure: 1022,
        humidity: 72,
        dew_point: 4.66,
        uvi: 0,
        clouds: 65,
        visibility: 10000,
        wind_speed: 2.71,
        wind_deg: 304,
        wind_gust: 5.93,
        weather: [
          {
            id: 803,
            main: "Clouds",
            description: "broken clouds",
            icon: "04n",
          },
        ],
        pop: 0,
      },
      {
        dt: 1634076000,
        temp: 9.72,
        feels_like: 8.3,
        pressure: 1022,
        humidity: 69,
        dew_point: 4.18,
        uvi: 0,
        clouds: 74,
        visibility: 10000,
        wind_speed: 2.79,
        wind_deg: 306,
        wind_gust: 6.28,
        weather: [
          {
            id: 803,
            main: "Clouds",
            description: "broken clouds",
            icon: "04n",
          },
        ],
        pop: 0,
      },
      {
        dt: 1634079600,
        temp: 9.6,
        feels_like: 8.16,
        pressure: 1023,
        humidity: 69,
        dew_point: 4.16,
        uvi: 0,
        clouds: 79,
        visibility: 10000,
        wind_speed: 2.79,
        wind_deg: 315,
        wind_gust: 6.87,
        weather: [
          {
            id: 803,
            main: "Clouds",
            description: "broken clouds",
            icon: "04n",
          },
        ],
        pop: 0,
      },
      {
        dt: 1634083200,
        temp: 9.42,
        feels_like: 8.07,
        pressure: 1023,
        humidity: 69,
        dew_point: 4.07,
        uvi: 0,
        clouds: 82,
        visibility: 10000,
        wind_speed: 2.59,
        wind_deg: 315,
        wind_gust: 6.53,
        weather: [
          {
            id: 803,
            main: "Clouds",
            description: "broken clouds",
            icon: "04n",
          },
        ],
        pop: 0,
      },
      {
        dt: 1634086800,
        temp: 9.3,
        feels_like: 8.01,
        pressure: 1023,
        humidity: 69,
        dew_point: 4.01,
        uvi: 0,
        clouds: 100,
        visibility: 10000,
        wind_speed: 2.48,
        wind_deg: 304,
        wind_gust: 5.79,
        weather: [
          {
            id: 804,
            main: "Clouds",
            description: "overcast clouds",
            icon: "04n",
          },
        ],
        pop: 0,
      },
      {
        dt: 1634090400,
        temp: 9.43,
        feels_like: 8.01,
        pressure: 1023,
        humidity: 72,
        dew_point: 4.53,
        uvi: 0,
        clouds: 100,
        visibility: 10000,
        wind_speed: 2.7,
        wind_deg: 299,
        wind_gust: 6.61,
        weather: [
          {
            id: 804,
            main: "Clouds",
            description: "overcast clouds",
            icon: "04n",
          },
        ],
        pop: 0.03,
      },
      {
        dt: 1634094000,
        temp: 9.43,
        feels_like: 7.9,
        pressure: 1023,
        humidity: 75,
        dew_point: 5.28,
        uvi: 0,
        clouds: 100,
        visibility: 10000,
        wind_speed: 2.88,
        wind_deg: 299,
        wind_gust: 7.47,
        weather: [
          {
            id: 804,
            main: "Clouds",
            description: "overcast clouds",
            icon: "04n",
          },
        ],
        pop: 0.03,
      },
      {
        dt: 1634097600,
        temp: 9.23,
        feels_like: 7.68,
        pressure: 1023,
        humidity: 77,
        dew_point: 5.49,
        uvi: 0,
        clouds: 99,
        visibility: 10000,
        wind_speed: 2.85,
        wind_deg: 302,
        wind_gust: 7.33,
        weather: [
          {
            id: 804,
            main: "Clouds",
            description: "overcast clouds",
            icon: "04n",
          },
        ],
        pop: 0.03,
      },
      {
        dt: 1634101200,
        temp: 8.5,
        feels_like: 6.87,
        pressure: 1024,
        humidity: 81,
        dew_point: 5.38,
        uvi: 0,
        clouds: 98,
        visibility: 10000,
        wind_speed: 2.75,
        wind_deg: 306,
        wind_gust: 6.6,
        weather: [
          {
            id: 804,
            main: "Clouds",
            description: "overcast clouds",
            icon: "04n",
          },
        ],
        pop: 0.03,
      },
      {
        dt: 1634104800,
        temp: 8.76,
        feels_like: 7.3,
        pressure: 1024,
        humidity: 81,
        dew_point: 5.65,
        uvi: 0,
        clouds: 98,
        visibility: 10000,
        wind_speed: 2.57,
        wind_deg: 301,
        wind_gust: 6.65,
        weather: [
          {
            id: 804,
            main: "Clouds",
            description: "overcast clouds",
            icon: "04d",
          },
        ],
        pop: 0.03,
      },
      {
        dt: 1634108400,
        temp: 9.26,
        feels_like: 7.97,
        pressure: 1024,
        humidity: 81,
        dew_point: 6.16,
        uvi: 0,
        clouds: 96,
        visibility: 10000,
        wind_speed: 2.47,
        wind_deg: 298,
        wind_gust: 6.73,
        weather: [
          {
            id: 804,
            main: "Clouds",
            description: "overcast clouds",
            icon: "04d",
          },
        ],
        pop: 0.03,
      },
      {
        dt: 1634112000,
        temp: 10.3,
        feels_like: 9.45,
        pressure: 1025,
        humidity: 79,
        dew_point: 6.81,
        uvi: 0.32,
        clouds: 98,
        visibility: 10000,
        wind_speed: 2.74,
        wind_deg: 304,
        wind_gust: 6.91,
        weather: [
          {
            id: 804,
            main: "Clouds",
            description: "overcast clouds",
            icon: "04d",
          },
        ],
        pop: 0.03,
      },
      {
        dt: 1634115600,
        temp: 11.56,
        feels_like: 10.7,
        pressure: 1025,
        humidity: 74,
        dew_point: 7.16,
        uvi: 0.71,
        clouds: 98,
        visibility: 10000,
        wind_speed: 3.78,
        wind_deg: 323,
        wind_gust: 7.58,
        weather: [
          { id: 500, main: "Rain", description: "light rain", icon: "10d" },
        ],
        pop: 0.27,
        rain: { "1h": 0.11 },
      },
      {
        dt: 1634119200,
        temp: 12.45,
        feels_like: 11.55,
        pressure: 1025,
        humidity: 69,
        dew_point: 6.91,
        uvi: 1.34,
        clouds: 99,
        visibility: 10000,
        wind_speed: 4.29,
        wind_deg: 334,
        wind_gust: 6.55,
        weather: [
          { id: 500, main: "Rain", description: "light rain", icon: "10d" },
        ],
        pop: 0.38,
        rain: { "1h": 0.11 },
      },
      {
        dt: 1634122800,
        temp: 13.17,
        feels_like: 12.19,
        pressure: 1025,
        humidity: 63,
        dew_point: 6.35,
        uvi: 1.72,
        clouds: 99,
        visibility: 10000,
        wind_speed: 4.35,
        wind_deg: 328,
        wind_gust: 5.69,
        weather: [
          {
            id: 804,
            main: "Clouds",
            description: "overcast clouds",
            icon: "04d",
          },
        ],
        pop: 0.14,
      },
      {
        dt: 1634126400,
        temp: 13.67,
        feels_like: 12.63,
        pressure: 1025,
        humidity: 59,
        dew_point: 5.73,
        uvi: 1.78,
        clouds: 99,
        visibility: 10000,
        wind_speed: 4.2,
        wind_deg: 319,
        wind_gust: 5.42,
        weather: [
          {
            id: 804,
            main: "Clouds",
            description: "overcast clouds",
            icon: "04d",
          },
        ],
        pop: 0.3,
      },
      {
        dt: 1634130000,
        temp: 14.21,
        feels_like: 13.1,
        pressure: 1025,
        humidity: 54,
        dew_point: 4.97,
        uvi: 1.52,
        clouds: 100,
        visibility: 10000,
        wind_speed: 4.09,
        wind_deg: 307,
        wind_gust: 5.17,
        weather: [
          {
            id: 804,
            main: "Clouds",
            description: "overcast clouds",
            icon: "04d",
          },
        ],
        pop: 0.24,
      },
      {
        dt: 1634133600,
        temp: 14.19,
        feels_like: 12.97,
        pressure: 1025,
        humidity: 50,
        dew_point: 4.07,
        uvi: 1.02,
        clouds: 92,
        visibility: 10000,
        wind_speed: 4.49,
        wind_deg: 309,
        wind_gust: 5.47,
        weather: [
          {
            id: 804,
            main: "Clouds",
            description: "overcast clouds",
            icon: "04d",
          },
        ],
        pop: 0.16,
      },
      {
        dt: 1634137200,
        temp: 13.65,
        feels_like: 12.45,
        pressure: 1025,
        humidity: 53,
        dew_point: 4.38,
        uvi: 0.5,
        clouds: 93,
        visibility: 10000,
        wind_speed: 3.85,
        wind_deg: 314,
        wind_gust: 5.52,
        weather: [
          {
            id: 804,
            main: "Clouds",
            description: "overcast clouds",
            icon: "04d",
          },
        ],
        pop: 0.11,
      },
      {
        dt: 1634140800,
        temp: 12.42,
        feels_like: 11.36,
        pressure: 1025,
        humidity: 63,
        dew_point: 5.54,
        uvi: 0.1,
        clouds: 83,
        visibility: 10000,
        wind_speed: 3.84,
        wind_deg: 325,
        wind_gust: 6.27,
        weather: [
          {
            id: 803,
            main: "Clouds",
            description: "broken clouds",
            icon: "04d",
          },
        ],
        pop: 0.05,
      },
      {
        dt: 1634144400,
        temp: 11.51,
        feels_like: 10.52,
        pressure: 1026,
        humidity: 69,
        dew_point: 5.91,
        uvi: 0,
        clouds: 86,
        visibility: 10000,
        wind_speed: 2.9,
        wind_deg: 324,
        wind_gust: 6.23,
        weather: [
          {
            id: 804,
            main: "Clouds",
            description: "overcast clouds",
            icon: "04n",
          },
        ],
        pop: 0.05,
      },
      {
        dt: 1634148000,
        temp: 10.04,
        feels_like: 9.08,
        pressure: 1026,
        humidity: 76,
        dew_point: 5.96,
        uvi: 0,
        clouds: 88,
        visibility: 10000,
        wind_speed: 2.34,
        wind_deg: 306,
        wind_gust: 4.28,
        weather: [
          {
            id: 804,
            main: "Clouds",
            description: "overcast clouds",
            icon: "04n",
          },
        ],
        pop: 0.01,
      },
      {
        dt: 1634151600,
        temp: 9.36,
        feels_like: 8.07,
        pressure: 1026,
        humidity: 79,
        dew_point: 6,
        uvi: 0,
        clouds: 95,
        visibility: 10000,
        wind_speed: 2.49,
        wind_deg: 293,
        wind_gust: 4.64,
        weather: [
          {
            id: 804,
            main: "Clouds",
            description: "overcast clouds",
            icon: "04n",
          },
        ],
        pop: 0,
      },
      {
        dt: 1634155200,
        temp: 9.01,
        feels_like: 7.81,
        pressure: 1027,
        humidity: 80,
        dew_point: 5.77,
        uvi: 0,
        clouds: 85,
        visibility: 10000,
        wind_speed: 2.28,
        wind_deg: 275,
        wind_gust: 3.64,
        weather: [
          {
            id: 804,
            main: "Clouds",
            description: "overcast clouds",
            icon: "04n",
          },
        ],
        pop: 0,
      },
      {
        dt: 1634158800,
        temp: 9.87,
        feels_like: 8.78,
        pressure: 1027,
        humidity: 75,
        dew_point: 5.59,
        uvi: 0,
        clouds: 82,
        visibility: 10000,
        wind_speed: 2.34,
        wind_deg: 259,
        wind_gust: 4.29,
        weather: [
          {
            id: 803,
            main: "Clouds",
            description: "broken clouds",
            icon: "04n",
          },
        ],
        pop: 0,
      },
      {
        dt: 1634162400,
        temp: 10.21,
        feels_like: 9.22,
        pressure: 1027,
        humidity: 74,
        dew_point: 5.82,
        uvi: 0,
        clouds: 86,
        visibility: 10000,
        wind_speed: 2.52,
        wind_deg: 247,
        wind_gust: 5.26,
        weather: [
          {
            id: 804,
            main: "Clouds",
            description: "overcast clouds",
            icon: "04n",
          },
        ],
        pop: 0,
      },
    ],
    daily: [
      {
        dt: 1634036400,
        sunrise: 1634018208,
        sunset: 1634057519,
        moonrise: 1634046000,
        moonset: 1634071920,
        moon_phase: 0.22,
        temp: {
          day: 12.73,
          min: 7.96,
          max: 12.73,
          night: 9.52,
          eve: 9.11,
          morn: 9.56,
        },
        feels_like: { day: 12.33, night: 8.11, eve: 7.19, morn: 8.07 },
        pressure: 1020,
        humidity: 87,
        dew_point: 10.59,
        wind_speed: 5.55,
        wind_deg: 355,
        wind_gust: 10.17,
        weather: [
          { id: 500, main: "Rain", description: "light rain", icon: "10d" },
        ],
        clouds: 100,
        pop: 0.98,
        rain: 3.04,
        uvi: 1.14,
      },
      {
        dt: 1634122800,
        sunrise: 1634104709,
        sunset: 1634143788,
        moonrise: 1634135400,
        moonset: 0,
        moon_phase: 0.25,
        temp: {
          day: 13.17,
          min: 8.5,
          max: 14.21,
          night: 9.87,
          eve: 11.51,
          morn: 8.5,
        },
        feels_like: { day: 12.19, night: 8.78, eve: 10.52, morn: 6.87 },
        pressure: 1025,
        humidity: 63,
        dew_point: 6.35,
        wind_speed: 4.49,
        wind_deg: 309,
        wind_gust: 7.58,
        weather: [
          { id: 500, main: "Rain", description: "light rain", icon: "10d" },
        ],
        clouds: 99,
        pop: 0.38,
        rain: 0.22,
        uvi: 1.78,
      },
      {
        dt: 1634209200,
        sunrise: 1634191210,
        sunset: 1634230059,
        moonrise: 1634223960,
        moonset: 1634162640,
        moon_phase: 0.3,
        temp: {
          day: 15.83,
          min: 8.78,
          max: 16.4,
          night: 12.07,
          eve: 12.77,
          morn: 8.97,
        },
        feels_like: { day: 15.32, night: 11.55, eve: 12.27, morn: 6.59 },
        pressure: 1024,
        humidity: 71,
        dew_point: 10.49,
        wind_speed: 6.06,
        wind_deg: 256,
        wind_gust: 12.53,
        weather: [
          {
            id: 804,
            main: "Clouds",
            description: "overcast clouds",
            icon: "04d",
          },
        ],
        clouds: 89,
        pop: 0,
        uvi: 1.76,
      },
      {
        dt: 1634295600,
        sunrise: 1634277711,
        sunset: 1634316330,
        moonrise: 1634311980,
        moonset: 1634253780,
        moon_phase: 0.33,
        temp: {
          day: 13.77,
          min: 8.59,
          max: 13.77,
          night: 8.59,
          eve: 10.11,
          morn: 11.61,
        },
        feels_like: { day: 12.48, night: 7.64, eve: 8.98, morn: 11.18 },
        pressure: 1020,
        humidity: 49,
        dew_point: 3.26,
        wind_speed: 6.32,
        wind_deg: 246,
        wind_gust: 13.51,
        weather: [
          { id: 500, main: "Rain", description: "light rain", icon: "10d" },
        ],
        clouds: 68,
        pop: 0.98,
        rain: 2.54,
        uvi: 1.85,
      },
      {
        dt: 1634382000,
        sunrise: 1634364213,
        sunset: 1634402602,
        moonrise: 1634399520,
        moonset: 1634344920,
        moon_phase: 0.36,
        temp: {
          day: 13.14,
          min: 5.58,
          max: 13.14,
          night: 8.67,
          eve: 9.52,
          morn: 5.58,
        },
        feels_like: { day: 11.74, night: 7.77, eve: 9.52, morn: 4.48 },
        pressure: 1024,
        humidity: 47,
        dew_point: 2,
        wind_speed: 1.86,
        wind_deg: 214,
        wind_gust: 2.27,
        weather: [
          {
            id: 802,
            main: "Clouds",
            description: "scattered clouds",
            icon: "03d",
          },
        ],
        clouds: 28,
        pop: 0,
        uvi: 1.99,
      },
      {
        dt: 1634468400,
        sunrise: 1634450716,
        sunset: 1634488875,
        moonrise: 1634486880,
        moonset: 1634436000,
        moon_phase: 0.4,
        temp: {
          day: 14.63,
          min: 7.11,
          max: 14.63,
          night: 9.86,
          eve: 11.02,
          morn: 7.4,
        },
        feels_like: { day: 13.48, night: 8.53, eve: 9.95, morn: 5.65 },
        pressure: 1022,
        humidity: 51,
        dew_point: 4.47,
        wind_speed: 3.8,
        wind_deg: 225,
        wind_gust: 5.39,
        weather: [
          { id: 801, main: "Clouds", description: "few clouds", icon: "02d" },
        ],
        clouds: 24,
        pop: 0,
        uvi: 2,
      },
      {
        dt: 1634554800,
        sunrise: 1634537218,
        sunset: 1634575149,
        moonrise: 1634574120,
        moonset: 1634526900,
        moon_phase: 0.43,
        temp: {
          day: 15.38,
          min: 8.14,
          max: 15.71,
          night: 10.54,
          eve: 11.67,
          morn: 8.23,
        },
        feels_like: { day: 14.17, night: 9.48, eve: 10.62, morn: 6.59 },
        pressure: 1022,
        humidity: 46,
        dew_point: 3.86,
        wind_speed: 3.99,
        wind_deg: 182,
        wind_gust: 10.4,
        weather: [
          {
            id: 804,
            main: "Clouds",
            description: "overcast clouds",
            icon: "04d",
          },
        ],
        clouds: 98,
        pop: 0,
        uvi: 2,
      },
      {
        dt: 1634641200,
        sunrise: 1634623721,
        sunset: 1634661424,
        moonrise: 1634661360,
        moonset: 1634617680,
        moon_phase: 0.46,
        temp: {
          day: 16.19,
          min: 10.37,
          max: 16.62,
          night: 15.05,
          eve: 16.28,
          morn: 11.68,
        },
        feels_like: { day: 15.56, night: 15.07, eve: 16.16, morn: 10.47 },
        pressure: 1012,
        humidity: 65,
        dew_point: 9.71,
        wind_speed: 8.22,
        wind_deg: 221,
        wind_gust: 17.46,
        weather: [
          { id: 501, main: "Rain", description: "moderate rain", icon: "10d" },
        ],
        clouds: 100,
        pop: 1,
        rain: 5.33,
        uvi: 2,
      },
    ],
  },
};

const _weatherReducer = createReducer<WeatherFeatureState, Action>(
  initialState,

  on(actionsWeather.searchCitySuccess, (state, { data }) => ({
    ...state,
    cityGeoInfos: data,
  })),

  on(actionsWeather.searchCity, (state, { searchText }) => {
    if (searchText.length == 0) {
      return { ...state, searchedCityText: "", cityGeoInfos: [] };
    } else {
      return {
        ...state,
        searchedCityText: searchText,
      };
    }
  }),

  on(actionsWeather.fetchWeatherInfo, (state, { cityInfo }) => {
    return { ...state, requestedCityInfo: cityInfo };
  }),

  on(actionsWeather.fetchWeatherInfoSuccess, (state, { data }) => {
    return { ...state, fetchedCityInfo: data };
  }),

  on(actionsWeather.sortDailyForecastData, (state, { data }) => {
    let direction = data.direction == "asc" ? 1 : -1;
    let newDaily = [...state.fetchedCityInfo.daily];
    newDaily = newDaily.sort((a, b) => {
      return (a.dt - b.dt) * direction;
    });
    return {
      ...state,
      fetchedCityInfo: {
        ...state.fetchedCityInfo,
        daily: [...newDaily],
      },
    };
  }),

  on(actionsWeather.sortHourlyForecastData, (state, { data }) => {
    let direction = data.direction == "asc" ? 1 : -1;
    let newHourly = [...state.fetchedCityInfo.hourly];
    newHourly = newHourly.sort((a, b) => {
      return (a.dt - b.dt) * direction;
    });
    return {
      ...state,
      fetchedCityInfo: {
        ...state.fetchedCityInfo,
        hourly: [...newHourly],
      },
    };
  })
);

export function weatherReducer(
  state: WeatherFeatureState | undefined,
  action: Action
) {
  return _weatherReducer(state, action);
}
